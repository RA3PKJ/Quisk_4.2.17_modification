Сборка  _quisk.pyd для 64-битного Quisk с использованием оболочки MSYS2 (для сборки требуется ОС не ниже Windows 8.1).


-----------------------------Среда сборки---------------------------------

1) Скачать 64-битный компилятор GCC по прямой ссылке:
https://github.com/brechtsanders/winlibs_mingw/releases/download/12.2.0-16.0.0-10.0.0-msvcrt-r5/winlibs-x86_64-posix-seh-gcc-12.2.0-mingw-w64msvcrt-10.0.0-r5.zip
или выбрать самостоятельно на странице https://winlibs.com/ (там выбрать среду MSVCRT, а также обратите внимание, что там архивы в двух вариантах: 7-Z и ZIP)
Распаковать в корень диска C:\. Появится папка C:\mingw64. Инсталляция не требуется.

2) Прописать в "Переменной окружения" пути к компилятору:
Панель управления > Система > Дополнительные параметры системы (мелким шрифтом) > Переменные среды. 
В нижнем окошке находим переменную Path и щёлкаем по ней дважды. Добавить пути:
  C:\mingw64\bin\ 
  C:\mingw64\x86_64-w64-mingw32\include\
Нажать везде ОК.

3) Инсталлировать консольную оболочку MSYS2 (версия на момент написания msys2-x86_64-20230127.exe) с сайта https://www.msys2.org/. Путь для установки C:\msys64.
Это консольная оболочка для будущего запуска компилятора.

4) Указать, что консольная оболочка будет использовать уже установленный нами в системе компилятор:
Панель управления > Система > Дополнительные параметры системы (мелким шрифтом) > Переменные среды.
В нижнем окошке через кнопку "Создать" создать переменную с именем MSYS2_PATH_TYPE и присвоить ей значение inherit.
Нажать везде ОК.

5) Проверить, что консольная оболочка видит компилятор, для чего запустить оболочку C:\msys64\msys2.exe
и в её окне вставить команду: gcc --version. Должна высветиться версия компилятора gcc 12.2.0 или выше.
Закрыть оболочку.


----------Исходники и библиотеки (они уже есть в папках, просто проверьте их наличие)-----------

6) Скачать Quisk с Гитхаба (от RA3PKJ) - https://github.com/RA3PKJ/Quisk_modification (архив zip). 
Распаковать архив на диск C:\ . Появится папка C:\Quisk_modification-main 
В папке должны присутствовать: 
- папка fftw-3.3.5-dll64 с 64-битной версией fftw (источник - www.fftw.org/install/windows.html).
- папка python311_64 с следующими библиотеками (источник - https://www.python.org/downloads/release/python-3119/):
    - \include (взята целиком из исходника Python-3.11.9.tgz, пункт Gzipped source tarball на указанной выше странице). 
    - \PC (взята целиком аналогично).
    - \libs (там один файл python311.dll, взятый из python-3.11.9-embed-amd64.zip, пункт Windows embeddable package (64-bit) на указанной выше странице).
- папка quisk.

7) В папке quisk в свою очередь должны присутствовать:
- файл сценария сборки build_quiskpyd .
- папка build, в которой должна быть папка temp.win64-3.11, а в ней папка Release. 


---------------------------------Сборка--------------------------------------

8) На время компиляции необходимо закомментировать в файле sound.c строчку: 
//struct sound_conf * pt_quisk_sound_state = &quisk_sound_state;//--------------- dublicate ------------------- 2 RA3PKJ
Не забудьте потом восстановить, а то компиляция в Linux (если будите делать) будет не корректной.

9) Старый файл _quisk.pyd переименуйте в _quisk_old.pyd  
Вдруг понадобится.

10) Запустить C:\msys64\mingw64.exe (не путать с msys2.exe, отличие - в консоли должна быть надпись MINGW64 фиолетовым цветом).
Вставить команду: cd /C/Quisk_modification-main/quisk/ (написание пути как в Linux)
Вставить команду: ./build_quiskpyd
Дождаться сборки _quisk.pyd.

