Сборка  _quisk.pyd для 32-битного Quisk с использованием MSYS2 (для сборки требуется 64-битная Windows 8.1 или выше).


-----------------------------Среда сборки---------------------------------

1) Скачать 32-битный компилятор GCC по прямой ссылке (там выбрать среду MSVCRT):
https://github.com/brechtsanders/winlibs_mingw/releases/download/12.2.0-15.0.7-10.0.0-msvcrt-r4/winlibs-i686-posix-dwarf-gcc-12.2.0-mingw-w64msvcrt-10.0.0-r4.zip
или выбрать самостоятельно на странице https://winlibs.com/
Распаковать в корень диска C:\. Появится папка C:\mingw32.

2) Прописать в "Переменной окружения" пути к компилятору:
Панель управления > Система > Дополнительные параметры системы (мелким шрифтом) > Переменные среды. 
В нижнем окошке находим переменную Path и щёлкаем по ней дважды. Добавить пути:
  C:\mingw32\bin\ 
  C:\mingw32\i686-w64-mingw32\include\
Нажать везде ОК.

3) Инсталлировать msys2-x86_64-20230127.exe ( https://www.msys2.org/ ). Путь для установки C:\msys64.
Это консольная оболочка для будущего запуска компилятора.

4) Указать, что консольная оболочка будет использовать уже установленный нами в системе компилятор:
Панель управления > Система > Дополнительные параметры системы (мелким шрифтом) > Переменные среды.
В нижнем окошке через кнопку "Создать" создать переменную с именем MSYS2_PATH_TYPE и присвоить ей значение inherit.
Нажать везде ОК.

5) Проверить, что консольная оболочка видит компилятор, для чего запустить оболочку C:\msys64\msys2.exe
и в её окне вставить команду: gcc --version. Должна высветиться версия компилятора gcc 12.2.0 или выше.
Закрыть оболочку.


------------------------------Исходники и библиотеки (они уже есть, просто проверьте)-------------------------

6) Скачать модифицированный Quisk с Гитхаба - https://github.com/RA3PKJ/Quisk_modification (архив zip). 
Распаковать архив на диск C:\ . Появится папка C:\Quisk_modification-main 
В папке должны присутствовать: 
- папка fftw-3.3.5-dll32 с 32-битной версией fftw (источник - www.fftw.org/install/windows.html).
- папка python39_32 с следующими библиотеками (источник - https://www.python.org/downloads/release/python-395/):
    - \include (взята целиком из исходника Python-3.9.5.tgz, пункт Gzipped source tarball на указанной выше странице). 
    - \PC (взята целиком аналогично). Примечание. В файле pyconfig.h закомментирована строчка //#define MS_WIN32 /* only support win32 and greater. */ 
    - \libs (там один файл python39.dll, взятый из python-3.9.5-embed-win32.zip, пункт Windows embeddable package (32-bit) на указанной выше странице).
- папка quisk.

7) В папке quisk в свою очередь должны присутствовать:
- файл сценария сборки build_quiskpyd .
- папка build, в которой должна быть папка temp.win32-3.9, а в ней папка Release. 


---------------------------------Сборка--------------------------------------

8) Перед сборкой закомментировать в файле sound.c (находится в папке quisk) строчку  вот так:  
//struct sound_conf * pt_quisk_sound_state = &quisk_sound_state;//--------------- dublicate ------------------- 2 RA3PKJ

9) Старый файл _quisk.pyd переименуйте в _quisk_old.pyd  
Вдруг понадобится.

10) Запустить C:\msys64\mingw32.exe (не путать с msys2.exe, отличие - в консоли должна быть надпись MINGW32 фиолетовым цветом).
Вставить команду: cd /C/Quisk_modification-main/quisk/ (написание пути как в Linux)
Вставить команду: ./build_quiskpyd
Дождаться сборки _quisk.pyd.

